<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
		<script src="https://www.gstatic.com/charts/loader.js"></script>
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<body>

	<title>$5 Coin Flip pg3</title>
</head>
<meta content="width=device-width,initial-scale=1.0" name="viewport">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="./css/Five_Dollar_Style.css">
		<style></style>

	</head> 

<body onload="initialize()">
	<div class="jumbotron">
	  <h1 class="display-4">Gambler's Hell... or Heaven?</h1>
	  <hr class="my-4">
	  <div id="removable">
	  <p>It's really all a matter of how much money you can stand to loose.</p>
	  <p>Notice that winning depends on those times we get 12 or more heads in a row. </p>
	  <p>12 heads = $4095, by the way. Without the occasional huge vertical spikes on the graph, we're just loosing</p>
	  <p>Perhaps there is a fun life lesson here: Soichori Honda (founder of Honda) said his life was 99% failure.</p>
	  <p>It seems some people face a challenge with more effort they are willing to spend, waiting on the occasional good fortune.</p>
	  <p>This will play until all our $10,000 is all gone or until we have $50,000.</p>
	  <p>If you start with $10,000, you will lose <strong>less than ONE PERCENT</strong> of the time!</p>
	  <p>Play as many times as you want.</p>
	  <span id="account">Account Balance:  $ <input type="number" id="balance">
	      <a class="btn btn-primary btn-lg" href="#" role="button" id="play" onclick="play()">Play</a><br><br><br>

	  <span id="conclusion"></span>

	  </span>

	  <div id="div1"></div>
	  <div id="yo"></div></div>
	      <a class="btn btn-primary btn-lg" href="#" role="button" id="movingOn" onclick="play10000times()"></a>
	  <div id="yo2"></div>

  </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.0/js/mdb.js"></script>

<script>
	var fullgame = []
	var gamenumbers = []
	var j = 0;
	var winTimes=0, lossTimes=0

	function initialize () {
		document.getElementById("balance").value=10000;
		document.getElementById("movingOn").style.visibility = 'hidden';
	};

	function play() {
	fullgame.length = 0;
	gamenumbers.length = 0;
	startingBalance = document.getElementById("balance").value;
	mybal = startingBalance;

	var j = 0;


		while ( mybal>4 && mybal <50000){
			var heads=0, won, wons=0 ;
			

			<!-- document.getElementById("outcome").innerHTML=null;	 -->
			<!-- document.getElementById("conclusion").innerHTML=null;	 -->

				flip();	
               //Flips the coin until first "tails."

				function flip() {
					for (heads=1 ; Math.random()>=.5 ; heads++) {

					won = Math.pow(2,(heads-1)); 
					wons = won + wons
					}// End of flip loop
				j++

				mybal = mybal - 5 + wons;	
				fullgame.push(mybal);
				gamenumbers.push(j);

				<!-- if (newBal<=4 || newBal>=50000) {gameOver()}; -->

				<!-- document.getElementById("balance").value=bal; -->
				}
				// END OF Game loop

		} // End of Play loop.
		<!-- console.log("Night is over", fullgame, gamenumbers);		 -->
		gameOver();
	
	}	// END OF PLAY (WHICH PLAYS OUT A WHOLE NIGHT) FUNCTION

		function gameOver() {
		var para = document.createElement("p");
		var element = document.getElementById("div1");
		element.appendChild(para);
	
			<!-- var parent = document.getElementById("account"); -->
			<!-- var child = document.getElementById("play"); -->
			<!-- parent.removeChild(child); -->


		graphIt();	
		setTimeout(playmore (), 800);
	}
	
	<!-- function winner() { -->
		<!-- var para = document.createElement("p"); -->
		<!-- var node = document.createTextNode(""); -->
		<!-- <!-- para.appendChild(node); --> -->
		<!-- var element = document.getElementById("div1"); -->
		<!-- element.appendChild(para); -->
	
			<!-- var parent = document.getElementById("account"); -->
			<!-- var child = document.getElementById("play"); -->
			<!-- parent.removeChild(child); -->


		<!-- graphIt();	 -->
		<!-- setTimeout(playmore (), 2000); -->
	<!-- } -->

	<!-- function loser () { -->
		<!-- var para = document.createElement("p"); -->
		<!-- var node = document.createTextNode(""); -->
		<!-- <!-- para.appendChild(node); --> -->
		<!-- var element = document.getElementById("div1"); -->
		<!-- element.appendChild(para); -->

			<!-- var parent = document.getElementById("account"); -->
			<!-- var child = document.getElementById("play"); -->
			<!-- parent.removeChild(child); -->

		<!-- graphIt(); -->
		<!-- setTimeout(playmore (), 2000); -->
	<!-- } -->

	function graphIt() {	
		document.getElementById("movingOn").style.visibility = 'visible';
		graphdata = [0,0];

		for (k=0; k<gamenumbers.length; k++) {
			graphdata[k]=[gamenumbers[k],fullgame[k]]; 
		};

		google.charts.load('44', {
		  callback: drawBackgroundColor,
		  packages: ['corechart']
		});

		function drawBackgroundColor() {

		  var data = new google.visualization.DataTable();
		  data.addColumn('number','gamenumbers');
		  data.addColumn('number','fullgame');

		  data.addRows(graphdata);

		  var options = {
		    hAxis: {
		      title: 'Game number'
		    },
		    vAxis: {
		      title: 'Account'
		    },
		    backgroundColor: '#f1f8e9'

		  };

		  var chart = new google.visualization.LineChart(document.getElementById('yo'));
		  chart.draw(data, options);
		}
            
    } /*End of graphIt*/        
	


	function playmore () {
		document.getElementById("movingOn").innerHTML = 'Click here to simulate 1000 "casino nights" as above!';	
	};

	function play10000times () {

		for (i=0; i<1000; i++) {
	
			playfast();
		}
	
		var child8 = document.getElementById("removable");
		child8.parentNode.removeChild(child8);	
		var child9 = document.getElementById("outcome");
		child9.parentNode.removeChild(child9);
		var child10 = document.getElementById("conclusion");
		child10.parentNode.removeChild(child10);		
		var child11 = document.getElementById("balance");
		child11.parentNode.removeChild(child11);
		var child12 = document.getElementById("yo");
		child12.parentNode.removeChild(child12);
		var child13 = document.getElementById("div1");
		child13.parentNode.removeChild(child13);		
		var child14 = document.getElementById("account");
		child14.parentNode.removeChild(child14);
	};

		function playfast() {
		var t=0	
			for (newBal=10000;(newBal>0 && newBal<50000);t++) {	
				var heads=0, won, wons=0;
				for (heads=1 ; Math.random()>=.5 ; heads++) {
					won = Math.pow(2,(heads-1)); 
					wons = won + wons;
				}
				j++
				newBal = newBal - 5 + wons;	
				fullgame.push(newBal);
				gamenumbers.push(j);
		 
			if (newBal>=50000) {winner2()};
			if (newBal<=0) {loser2()};				
			};
		} ; //End of playfast. 
       //Flips the coin until first "tails."


		function winner2() {
			winTimes++;
			document.getElementById("yo2").innerHTML = "<br>Nights you left with $50,000 or more: "+winTimes+" <br/> Nights you lost $10,000: "+lossTimes+"<br/> Percent of nights with a winning outcome : "+(100*winTimes/(winTimes+lossTimes))+"%<br>"+
			"If we didn't occasionally get 12-18 heads-in-a-row, we wouldn't win, would we? <br> THANKS FOR PLAYING!!";
			
		};

		function loser2 () {
			lossTimes++;
			document.getElementById("yo2").innerHTML = "<br>Nights you left with $50,000 or more: "+winTimes+" <br/> Nights you lost $10,000: "+lossTimes+" <br/> Percent of nights with a winning outcome : "+(100*winTimes/(winTimes+lossTimes))+"%<br>"+
			"If we didn't occasionally get 12-18 heads-in-a-row, we wouldn't win, would we? <br> THANKS FOR PLAYING!!";
		}	
/*		function graphIt2() {	

		graphdata = [0,0];

		for (k=0; k<gamenumbers.length; k++) {
			graphdata[k]=[gamenumbers[k],fullgame[k]]; 
		};

		google.charts.load('44', {
		  callback: drawBackgroundColor,
		  packages: ['corechart']
		});

		function drawBackgroundColor() {

		  var data = new google.visualization.DataTable();
		  data.addColumn('number','gamenumbers');
		  data.addColumn('number','fullgame');

		  data.addRows(graphdata);

		  var options = {
		    hAxis: {
		      title: 'Game number'
		    },
		    vAxis: {
		      title: 'Account'
		    },
		    backgroundColor: '#f1f8e9'

		  };

		  var chart = new google.visualization.LineChart(document.getElementById('yo'));
		  ;
		}
		function addGraph() {
		    var node = document.createElement("YO2");
		    var graphnode = document.createTextNode(chart.draw(data, options));
		    node.appendChild(graphnode);
		    document.getElementById("yo2").appendChild(node);
		}
		 }
           */ 
    /*End of graphIt2*/
	
</script>

</html>	