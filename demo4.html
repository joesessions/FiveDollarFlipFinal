<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
		<script src="https://www.gstatic.com/charts/loader.js"></script>
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<body>

	<title>$5 Coin Flip pg3</title>
</head>
<meta content="width=device-width,initial-scale=1.0" name="viewport">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="./css/Five_Dollar_Style.css">
		<style></style>

	</head> 

<body onload="initialize()">
	<div class="jumbotron">
	  <h1 class="display-4">Life vs. Gambling</h1>
	  <hr class="my-4">
	  <div id="removable">
	  <p></p>
		<p>No casino offers a game with odds in your favor (such as this one),<br>
		and let's face it, gambling is basically a bad idea. <br> However, isn't it interesting that when we are only playing with $50 it looks like a losing game?</p>
		<img src="images/50Game.png" alt="losing game pic">		
	  <p><br>Yet we see that we are winning only when we look big-picture?</p>
	    		<img src="images/winningGame.png" alt="winning game pic">	
				<p><br> Could the same often be said about our lives?  </p> <img src="images/smileyThumbsUp.jpg" alt="thumbs up pic">
	  <p>Fun fact: The above graph was obtained by setting winning threshold to $5,000,000. The big jump in the middle must be $1,048,575, which is the payout for 20 heads in a row.</p>
	  <p>(Could you imagine flipping 20 heads in a row?? The odds of flipping a coin 20 times and them all being heads is 0.000095%!)
	  <!-- <p>Fun fact: Once, in the development of this, a game was played the threshold set to only $50,000, but a single game had winnings of $8,000,000, representing 23 heads in a row! -->
	  </span>

	  <div id="div1"></div>

	  <div id="yo2"></div>
	  	  <div id="yo2"></div>
	  <!-- <a class="btn btn-primary btn-lg" href="#" role="button" id="goToDemo4" onclick="goToDemo3()"></a> -->

  </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.0/js/mdb.js"></script>

<script>

	var fullgame = []
	var gamenumbers = []
	var j = 0;
	var winTimes=0, lossTimes=0

	function initialize () {
		document.getElementById("balance").value=10000;
		document.getElementById("movingOn").style.visibility = 'hidden';
		document.getElementById("goToDemo3").style.visibility = 'hidden';
	};

	function play() {
	fullgame.length = 0;
	gamenumbers.length = 0;
	startingBalance = document.getElementById("balance").value;
	mybal = startingBalance;

	var j = 0;


		while ( mybal>4 && mybal <50000){
			var heads=0, won, wons=0 ;
			

			<!-- document.getElementById("outcome").innerHTML=null;	 -->
			<!-- document.getElementById("conclusion").innerHTML=null;	 -->

				flip();	
               //Flips the coin until first "tails."

				function flip() {
					for (heads=1 ; Math.random()>=.5 ; heads++) {

					won = Math.pow(2,(heads-1)); 
					wons = won + wons
					}// End of flip loop
				j++

				mybal = mybal - 5 + wons;	
				fullgame.push(mybal);
				gamenumbers.push(j);

				<!-- if (newBal<=4 || newBal>=50000) {gameOver()}; -->

				<!-- document.getElementById("balance").value=bal; -->
				}
				// END OF Game loop

		} // End of Play loop.
		<!-- console.log("Night is over", fullgame, gamenumbers);		 -->
		gameOver();
	
	}	// END OF PLAY (WHICH PLAYS OUT A WHOLE NIGHT) FUNCTION

		function gameOver() {
		var para = document.createElement("p");
		var element = document.getElementById("div1");
		element.appendChild(para);
	
			<!-- var parent = document.getElementById("account"); -->
			<!-- var child = document.getElementById("play"); -->
			<!-- parent.removeChild(child); -->


		graphIt();	
		setTimeout(playmore (), 800);
	}
	
	<!-- function winner() { -->
		<!-- var para = document.createElement("p"); -->
		<!-- var node = document.createTextNode(""); -->
		<!-- <!-- para.appendChild(node); --> -->
		<!-- var element = document.getElementById("div1"); -->
		<!-- element.appendChild(para); -->
	
			<!-- var parent = document.getElementById("account"); -->
			<!-- var child = document.getElementById("play"); -->
			<!-- parent.removeChild(child); -->


		<!-- graphIt();	 -->
		<!-- setTimeout(playmore (), 2000); -->
	<!-- } -->

	<!-- function loser () { -->
		<!-- var para = document.createElement("p"); -->
		<!-- var node = document.createTextNode(""); -->
		<!-- <!-- para.appendChild(node); --> -->
		<!-- var element = document.getElementById("div1"); -->
		<!-- element.appendChild(para); -->

			<!-- var parent = document.getElementById("account"); -->
			<!-- var child = document.getElementById("play"); -->
			<!-- parent.removeChild(child); -->

		<!-- graphIt(); -->
		<!-- setTimeout(playmore (), 2000); -->
	<!-- } -->

	function graphIt() {	
		document.getElementById("movingOn").style.visibility = 'visible';
		graphdata = [0,0];

		for (k=0; k<gamenumbers.length; k++) {
			graphdata[k]=[gamenumbers[k],fullgame[k]]; 
		};

		google.charts.load('44', {
		  callback: drawBackgroundColor,
		  packages: ['corechart']
		});

		function drawBackgroundColor() {

		  var data = new google.visualization.DataTable();
		  data.addColumn('number','gamenumbers');
		  data.addColumn('number','fullgame');

		  data.addRows(graphdata);

		  var options = {
		    hAxis: {
		      title: 'Game number'
		    },
		    vAxis: {
		      title: 'Account'
		    },
		    backgroundColor: '#f1f8e9'

		  };

		  var chart = new google.visualization.LineChart(document.getElementById('yo'));
		  chart.draw(data, options);
		}
            
    } /*End of graphIt*/        
	


	function playmore () {
		document.getElementById("movingOn").innerHTML = 'Click here to simulate 1000 "casino nights" as above!';	
	};

	function play10000times () {

		for (i=0; i<1000; i++) {
	
			playfast();
		}
	
		var child8 = document.getElementById("removable");
		child8.parentNode.removeChild(child8);	
		var child9 = document.getElementById("outcome");
		child9.parentNode.removeChild(child9);
		var child10 = document.getElementById("conclusion");
		child10.parentNode.removeChild(child10);		
		var child11 = document.getElementById("balance");
		child11.parentNode.removeChild(child11);
		var child12 = document.getElementById("yo");
		child12.parentNode.removeChild(child12);
		var child13 = document.getElementById("div1");
		child13.parentNode.removeChild(child13);		
		var child14 = document.getElementById("account");
		child14.parentNode.removeChild(child14);
	};

		function playfast() {
		var t=0	
			for (newBal=10000;(newBal>0 && newBal<50000);t++) {	
				var heads=0, won, wons=0;
				for (heads=1 ; Math.random()>=.5 ; heads++) {
					won = Math.pow(2,(heads-1)); 
					wons = won + wons;
				}
				j++
				newBal = newBal - 5 + wons;	
				fullgame.push(newBal);
				gamenumbers.push(j);
		 
			if (newBal>=50000) {winner2()};
			if (newBal<=0) {loser2()};				
			};
		} ; //End of playfast. 
       //Flips the coin until first "tails."


		function winner2() {
			winTimes++;
			document.getElementById("yo2").innerHTML = "<br>Nights you left with $50,000 or more: "+winTimes+" <br/> Nights you lost $10,000: "+lossTimes+"<br/> Percent of nights with a winning outcome : "+(100*winTimes/(winTimes+lossTimes))+"%<br>"+
			"THANKS FOR PLAYING!!";
			document.getElementById("goToDemo3").style.visibility = 'visible';
			
		};

		function loser2 () {
			lossTimes++;
			document.getElementById("yo2").innerHTML = "<br>Nights you left with $50,000 or more: "+winTimes+" <br/> Nights you lost $10,000: "+lossTimes+" <br/> Percent of nights with a winning outcome : "+(100*winTimes/(winTimes+lossTimes))+"%<br>"+
			"THANKS FOR PLAYING!!";
			document.getElementById("goToDemo3").style.visibility = 'visible';
		}	
		
		function goToDemo4() {
		window.location.assign("demo4.html")
		}
		
		
		
		
/*		function graphIt2() {	

		graphdata = [0,0];

		for (k=0; k<gamenumbers.length; k++) {
			graphdata[k]=[gamenumbers[k],fullgame[k]]; 
		};

		google.charts.load('44', {
		  callback: drawBackgroundColor,
		  packages: ['corechart']
		});

		function drawBackgroundColor() {

		  var data = new google.visualization.DataTable();
		  data.addColumn('number','gamenumbers');
		  data.addColumn('number','fullgame');

		  data.addRows(graphdata);

		  var options = {
		    hAxis: {
		      title: 'Game number'
		    },
		    vAxis: {
		      title: 'Account'
		    },
		    backgroundColor: '#f1f8e9'

		  };

		  var chart = new google.visualization.LineChart(document.getElementById('yo'));
		  ;
		}
		function addGraph() {
		    var node = document.createElement("YO2");
		    var graphnode = document.createTextNode(chart.draw(data, options));
		    node.appendChild(graphnode);
		    document.getElementById("yo2").appendChild(node);
		}
		 }
           */ 
    /*End of graphIt2*/
	
</script>

</html>	